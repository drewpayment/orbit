apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: orbit-www-secrets
  namespace: orbit-www
spec:
  refreshInterval: "1h"
  secretStoreRef:
    kind: ClusterSecretStore
    name: doppler-cluster-secret-store
  target:
    name: orbit-www-secrets
  data:
    # Database
    - secretKey: database_uri
      remoteRef:
        key: ORBIT_DATABASE_URI
    # Auth
    - secretKey: payload_secret
      remoteRef:
        key: PAYLOAD_SECRET
    # GitHub App
    - secretKey: github_app_id
      remoteRef:
        key: GITHUB_APP_ID
    - secretKey: github_app_private_key
      remoteRef:
        key: GITHUB_APP_PRIVATE_KEY
    - secretKey: github_client_id
      remoteRef:
        key: GITHUB_CLIENT_ID
    - secretKey: github_client_secret
      remoteRef:
        key: GITHUB_CLIENT_SECRET
    - secretKey: github_webhook_secret
      remoteRef:
        key: GITHUB_WEBHOOK_SECRET
    # Internal API
    - secretKey: orbit_internal_api_key
      remoteRef:
        key: ORBIT_INTERNAL_API_KEY
