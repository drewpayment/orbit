# Traefik dynamic configuration for Orbit local development
#
# With Orbstack, Traefik is accessible at: traefik.orbit.orb.local
# Kafka clients connect to: traefik.orbit.orb.local:9092
#
# Bifrost routes Kafka traffic to virtual clusters based on authenticated credentials.

tcp:
  routers:
    kafka:
      entryPoints:
        - kafka
      rule: "HostSNI(`*`)"
      service: bifrost

  services:
    # Bifrost proxy for multi-tenant Kafka access
    bifrost:
      loadBalancer:
        servers:
          - address: "bifrost:9092"

http:
  routers:
    # Traefik dashboard
    dashboard:
      rule: "Host(`traefik.orbit.orb.local`)"
      service: api@internal
      entryPoints:
        - web
